<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Packaging a Dash App with PyFladesk and PyInstaller | geostats.dev</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Packaging a Dash App with PyFladesk and PyInstaller" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Turn your Dash App into a stand alone desktop application" />
<meta property="og:description" content="Turn your Dash App into a stand alone desktop application" />
<link rel="canonical" href="geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/pyfladesk/pyinstaller/2021/03/14/dash-packaging.html" />
<meta property="og:url" content="geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/pyfladesk/pyinstaller/2021/03/14/dash-packaging.html" />
<meta property="og:site_name" content="geostats.dev" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-14T00:00:00-06:00" />
<script type="application/ld+json">
{"url":"geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/pyfladesk/pyinstaller/2021/03/14/dash-packaging.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/pyfladesk/pyinstaller/2021/03/14/dash-packaging.html"},"headline":"Packaging a Dash App with PyFladesk and PyInstaller","dateModified":"2021-03-14T00:00:00-06:00","datePublished":"2021-03-14T00:00:00-06:00","description":"Turn your Dash App into a stand alone desktop application","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="geostats.dev/feed.xml" title="geostats.dev" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">geostats.dev</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/resources/">Resources</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Packaging a Dash App with PyFladesk and PyInstaller</h1><p class="page-description">Turn your Dash App into a stand alone desktop application</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-03-14T00:00:00-06:00" itemprop="datePublished">
        Mar 14, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      3 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#Python">Python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Plotly">Plotly</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Dash">Dash</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Flask">Flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Dash Bootstrap Components">Dash Bootstrap Components</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#PyFladesk">PyFladesk</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#PyInstaller">PyInstaller</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#packaging-dash-apps-into-an-executable">Packaging Dash Apps into an Executable</a>
<ul>
<li class="toc-entry toc-h2"><a href="#step-1-build-a-dash-app">Step 1: Build A Dash App</a></li>
<li class="toc-entry toc-h2"><a href="#step-2-running-dash-using-qtwebengine-with-pyfladesk">Step 2: Running Dash using QtWebEngine with PyFladesk</a></li>
<li class="toc-entry toc-h2"><a href="#step-3-packaging-it-all-with-pyinstaller">Step 3: Packaging it all with PyInstaller</a></li>
<li class="toc-entry toc-h2"><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul><h1 id="packaging-dash-apps-into-an-executable">
<a class="anchor" href="#packaging-dash-apps-into-an-executable" aria-hidden="true"><span class="octicon octicon-link"></span></a>Packaging Dash Apps into an Executable</h1>

<p>The first question is - why bother? This is a very valid question. Dash Apps are built for the web and best run in the browser, hosted on a server. But there are times when a stand alone app can be useful.</p>

<p>Mostly I wanted to see if it is feasible  to create a small desktop GUI based tool (similar to Electron based JS software) with Dash. Turns out, its not hard - I’m sure there are some details to this that could be tuned up but the purpose of this post is to share the basic workflow for packaging a dash app.</p>

<h2 id="step-1-build-a-dash-app">
<a class="anchor" href="#step-1-build-a-dash-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 1: Build A Dash App</h2>

<p>Diamond Drillhole Quality-Assurance Quality-Control (DDH-QAQC) is a small dash app designed to desurvey and composite mining drill hole data as well as provide some basic data visualization for QA/QC purposes. This is a work in progress and hasn’t been optimized, as previously mentioned the main goal here was to try packaging a dash app.</p>

<p>This App takes advantage of a couple nice Dash add-ons including <a href="https://github.com/ericbdaniels/dash_router">dash_router</a>, <a href="https://dash-bootstrap-components.opensource.faculty.ai/">Dash Bootstrap Components</a> and <a href="https://dash.plotly.com/datatable">Dash DataTable</a>.</p>

<p>The app itself is used to load some data from a few CSV files and do a bit of math to generate average values with x, y, coordinates. Ultimately, the user will want to compare the composited values to the original values and export the results once satisfied. To do all this, I added a very basic use of sqllite to support all this.</p>

<p>The app code can be seen on the <a href="https://github.com/ericbdaniels/ddh-qaqc/tree/main/App">DDH-QAQC Repo</a>. A few screen shots in the next section..</p>

<h2 id="step-2-running-dash-using-qtwebengine-with-pyfladesk">
<a class="anchor" href="#step-2-running-dash-using-qtwebengine-with-pyfladesk" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 2: Running Dash using QtWebEngine with PyFladesk</h2>

<p>Under the hood Dash is built on flask, this makes implementing <a href="https://github.com/smoqadam/PyFladesk">PyFladesk</a> easy. Really its a single line, instead of the usual <code class="language-plaintext highlighter-rouge">app.run_server</code> use <code class="language-plaintext highlighter-rouge">init_gui(app.server)</code>. There are a handful of other options to set the screen size, icon, port. Heres a snippet of the current setup:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pyfladesk</span> <span class="kn">import</span> <span class="n">init_gui</span>

    <span class="n">init_gui</span><span class="p">(</span>
        <span class="n">app</span><span class="p">.</span><span class="n">server</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
        <span class="n">window_title</span><span class="o">=</span><span class="s">"DDH-QAQC"</span><span class="p">,</span>
        <span class="n">icon</span><span class="o">=</span><span class="s">"App/assets/favicon.ico"</span><span class="p">,</span>
        <span class="n">argv</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>Ultimately, its super easy and works great:</p>

<p><img src="/images/splash_page.png" alt="image">
<img src="/images/upload.png" alt="image">
<img src="/images/composite.png" alt="image">
<img src="/images/composite_eda.png" alt="image"></p>

<h2 id="step-3-packaging-it-all-with-pyinstaller">
<a class="anchor" href="#step-3-packaging-it-all-with-pyinstaller" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 3: Packaging it all with PyInstaller</h2>

<p>There are a few tools available for packaging python into an executable. Used <a href="https://www.pyinstaller.org/">PyInstaller</a> and I’ve heard <a href="https://cx-freeze.readthedocs.io/en/latest/">cx_freeze</a> works well too but its not something I’ve tried. Creating the executable took a bit of trial and error. For some reason the dash dependencies weren’t picked up automatically and had top be included in th <code class="language-plaintext highlighter-rouge">main-dir.spec</code> file manually:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">site</span>

<span class="n">site_pkgs_dir</span> <span class="o">=</span> <span class="n">site</span><span class="p">.</span><span class="n">getsitepackages</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">addl_pkgs</span> <span class="o">=</span> <span class="p">[</span><span class="s">"plotly"</span><span class="p">,</span> <span class="s">"dash_renderer"</span><span class="p">,</span><span class="s">"dash_html_components"</span><span class="p">,</span><span class="s">"dash_bootstrap_components"</span><span class="p">,</span> <span class="s">"dash_core_components"</span><span class="p">,</span> <span class="s">"dash_table"</span><span class="p">]</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">([</span><span class="s">'main.py'</span><span class="p">],</span>
             <span class="n">pathex</span><span class="o">=</span><span class="p">[</span><span class="s">'c:</span><span class="se">\\</span><span class="s">code-dev</span><span class="se">\\</span><span class="s">ddh-qaqc</span><span class="se">\\</span><span class="s">App'</span><span class="p">],</span>
             <span class="n">binaries</span><span class="o">=</span><span class="p">[],</span>
             <span class="n">datas</span><span class="o">=</span><span class="p">[(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">site_pkgs_dir</span><span class="p">,</span><span class="n">pkg</span><span class="p">),</span><span class="n">pkg</span><span class="p">)</span> <span class="k">for</span> <span class="n">pkg</span> <span class="ow">in</span> <span class="n">addl_pkgs</span><span class="p">],</span>
</code></pre></div></div>

<p>Also, I ran into some trouble with flask-compress. See <a href="https://stackoverflow.com/questions/64290390/pyinstaller-executable-cannot-find-flask-compress-distribution-that-is-include">this Stack Overflow question</a> for the solution. This was copied to the app.py file prior to importing dash.</p>

<p>With all that taken care of, creating an executable that includes a directory full of dependencies works nicely. There is a flag to run PyInstaller and produce a single file but for some reason this simply wasn’t working. For now, the directory based solution works fine and is available <a href="https://github.com/ericbdaniels/ddh-qaqc/blob/main/ddh-qaqc.tar.gz">here</a> should you want to give it a try.</p>

<h2 id="conclusion">
<a class="anchor" href="#conclusion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusion</h2>

<p>There are plenty of great ways to create desktop based software, but this approach makes it pretty damn easy - even if its not perfect. If you have a need to make nice looking GUI and don’t want to get building a full on React/Electron app Dash with PyFladesk and PyInstaller is an option. Give it a go, would love to see more creative uses of Dash!</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="ericbdaniels/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/python/plotly/dash/flask/dash%20bootstrap%20components/pyfladesk/pyinstaller/2021/03/14/dash-packaging.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Python code snippets, thoughts on Geostatistics and lessons learned the hard way.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/ericbdaniels" title="ericbdaniels"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/__getostats__" title="__getostats__"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
