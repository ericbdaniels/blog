<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Better Dashboards with Dash | geostats.dev</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Better Dashboards with Dash" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A Handful of Tips for Improving Dash Apps" />
<meta property="og:description" content="A Handful of Tips for Improving Dash Apps" />
<link rel="canonical" href="geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/2020/11/26/dash-post.html" />
<meta property="og:url" content="geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/2020/11/26/dash-post.html" />
<meta property="og:site_name" content="geostats.dev" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-26T00:00:00-06:00" />
<script type="application/ld+json">
{"url":"geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/2020/11/26/dash-post.html","@type":"BlogPosting","headline":"Better Dashboards with Dash","dateModified":"2020-11-26T00:00:00-06:00","datePublished":"2020-11-26T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"geostats.dev/python/plotly/dash/flask/dash%20bootstrap%20components/2020/11/26/dash-post.html"},"description":"A Handful of Tips for Improving Dash Apps","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="geostats.dev/feed.xml" title="geostats.dev" /><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">geostats.dev</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About Me</a><a class="page-link" href="/resources/">Resources</a><a class="page-link" href="/search/">Search</a><a class="page-link" href="/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Better Dashboards with Dash</h1><p class="page-description">A Handful of Tips for Improving Dash Apps</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-11-26T00:00:00-06:00" itemprop="datePublished">
        Nov 26, 2020
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      7 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#Python">Python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Plotly">Plotly</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Dash">Dash</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Flask">Flask</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#Dash Bootstrap Components">Dash Bootstrap Components</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#tips-for-creating-dashboards-with-dash">Tips for Creating Dashboards with Dash</a>
<ul>
<li class="toc-entry toc-h2"><a href="#start-with-better-plots">Start With Better Plots</a>
<ul>
<li class="toc-entry toc-h3"><a href="#themes--templates">Themes &amp; Templates</a></li>
<li class="toc-entry toc-h3"><a href="#efficiently-instantiate-figures-using-magic-underscore-notation">Efficiently Instantiate Figures Using Magic Underscore Notation</a></li>
<li class="toc-entry toc-h3"><a href="#aspect-ratio">Aspect Ratio</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#dash">Dash</a>
<ul>
<li class="toc-entry toc-h3"><a href="#dash-bootstrap-components">Dash Bootstrap Components</a></li>
<li class="toc-entry toc-h3"><a href="#routing">Routing</a></li>
<li class="toc-entry toc-h3"><a href="#responsive-layout">Responsive Layout</a></li>
<li class="toc-entry toc-h3"><a href="#remove-the-plotly-logo">Remove the Plotly Logo</a></li>
<li class="toc-entry toc-h3"><a href="#callback-triggers">Callback Triggers</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul><h1 id="tips-for-creating-dashboards-with-dash">
<a class="anchor" href="#tips-for-creating-dashboards-with-dash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tips for Creating Dashboards with Dash</h1>

<p>Presenting data visualizations via a dashboard is a great way to communicate insights from data and provide some tools for decision making. There are many many different tools both commercial and open source available for dashboarding, one of my favorites in the open source category is Dash. Dash is free (though there is an enterprise version) and makes it possible to host a series of plotly charts, tables, visualizations on a flask based webapp [almost] exclusively using python.</p>

<h2 id="start-with-better-plots">
<a class="anchor" href="#start-with-better-plots" aria-hidden="true"><span class="octicon octicon-link"></span></a>Start With Better Plots</h2>

<p>The first few items on this list aren’t specifically related to dash, but plotly. Better looking plots yield a better looking dashboard. The details matter, and like most plotting packages the defaults rarely fit your needs. The following are a few items from the plotly docs worth noting.</p>

<blockquote>
  <p>Note: for all the plotly examples assume <code class="language-plaintext highlighter-rouge">import plotly.graph_objs as go</code></p>
</blockquote>

<h3 id="themes--templates">
<a class="anchor" href="#themes--templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Themes &amp; Templates</h3>

<p>If the default colors and theme from plotly don’t fit your your desired color palette there are a handful of pre-configured themes. Most of the time these templates are a good starting point and a few adjustments to axes, colors etc will suffice. If thats not enough a custom template can be created and saved a json file and set to the default. <a href="https://plotly.com/python/templates/">The plotly docs</a> give a good walk through of this feature.</p>

<h3 id="efficiently-instantiate-figures-using-magic-underscore-notation">
<a class="anchor" href="#efficiently-instantiate-figures-using-magic-underscore-notation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Efficiently Instantiate Figures Using Magic Underscore Notation</h3>

<p>The <code class="language-plaintext highlighter-rouge">layout</code> controls most aesthetic plot details such as labels, axes ranges, etc. In many cases this leads to a heavily nested statement to instantiate the <code class="language-plaintext highlighter-rouge">go.Figure</code>. The magic underscore notation makes accessing all of these details easier and more efficient. Here’s an example, with and without the magic underscore approach used to set the template and axes labels.</p>

<blockquote>
  <p>Without Underscore Notation:</p>

  <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>f = go.figure(layout=dict(template="none", xaxis=dict(title_text="x values")))
</code></pre></div>  </div>
</blockquote>

<blockquote>
  <p>With Underscore Notation:</p>

  <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>f = go.figure(layout_template="none", layout_xaxis_title_text="x_values")
</code></pre></div>  </div>
</blockquote>

<h3 id="aspect-ratio">
<a class="anchor" href="#aspect-ratio" aria-hidden="true"><span class="octicon octicon-link"></span></a>Aspect Ratio</h3>

<p>Plotly does not enforce an equal aspect ratio by default. There are times when this is important, rather than having to dig through the docs heres the syntax make it happen:</p>

<p>In 2-D Plots, set the <code class="language-plaintext highlighter-rouge">scaleanchor</code> and <code class="language-plaintext highlighter-rouge">scaleratio</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f = go.Figure(layout_yaxis=dict(scaleanchor="x", scaleratio=1))
</code></pre></div></div>

<p>In 3-D the aspect ratio is controlled by the <code class="language-plaintext highlighter-rouge">scene</code> <code class="language-plaintext highlighter-rouge">aspectmode</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f = go.Figure(layout_scene_aspectmode="data")
</code></pre></div></div>

<h2 id="dash">
<a class="anchor" href="#dash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dash</h2>

<p>The second section of this post focuses on Dash. Creating a single page Dash app is quick, easy and the docs provide great examples. However, to go beyond a single page app with static data you’ll have to get a bit more creative. The following are a few of my go-to tools and strategies for building dash apps.</p>

<p>Have a look at the <a href="https://github.com/ericbdaniels/dash-demo">dash-demo repo</a> on my github to see a very basic working example.</p>

<h3 id="dash-bootstrap-components">
<a class="anchor" href="#dash-bootstrap-components" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dash Bootstrap Components</h3>

<p>I find web development a bit intimidating. Not only are there a lot of moving pieces but there are many ways to construct each of those pieces. Twitter bootstrap is just once css framework, but its well documented and has everything you need to build a good looking website. <a href="https://dash-bootstrap-components.opensource.faculty.ai/">Dash Bootstrap Components (dbc)</a> brings the layout, styling and a handful of components from bootstrap to dash with minimal code. Sure, you can include the css yourself but this is just easy. Also there are a few included <a href="https://www.bootstrapcdn.com/bootswatch/">themes from bootswatch</a> which is an easy way to change the look of your app with a single line of code.</p>

<p>If you’re unfamiliar with boostrap, the <a href="https://dash-bootstrap-components.opensource.faculty.ai/docs/components/layout/">layout section</a> of the dbc docs gives all the overview you’ll need. Adding dbc to your project opens the ability to use any existing bootstrap classes as well. Have a look at the <a href="https://getbootstrap.com/2.3.2/getting-started.html">bootstrap docs</a> for more info.</p>

<h3 id="routing">
<a class="anchor" href="#routing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Routing</h3>

<p>Running multiple dash apps or even a single app with multiple pages or dynamic layouts can be a bit of hassle. In my opinion the <a href="https://dash.plotly.com/urls">solution provided by plotly</a> is insufficient. If the app grows to more than 2 or 3 urls a rather large ugly conditional statement becomes the central switchboard dispatching the layout based on url. Mercy University Hospital has come up with a much nicer solution called <a href="https://github.com/ericbdaniels/dash_router">dash_router</a>. This provides a flask-style decorator to handle the url routing. No, it doesn’t have ALL the features of flask, but its a handy way to manage a few different endpoints and pass a couple parameters in a dynamic url. I added a few lines of code to handle query strings as well (hence the link to my fork of the repo).</p>

<p>In the dash-demo example, this is added as separate module, <a href="https://github.com/ericbdaniels/dash-demo/blob/main/router.py">router.py</a>. The snippet below gives two examples, first a dynamic url that includes an argument passed on the to layout function and the second uses a query string for some n parameters passed on to the layout (handled by <code class="language-plaintext highlighter-rouge">**kwargs</code>). In this case these layouts plot either a single distribution selected from the drop down or multiple.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@router.route("/univariate/&lt;distribution_name&gt;")
def univariate_stats(distribution_name):
    return template_layout(dcc.Graph(figure=plots.histogram(data[distribution_name])))


@router.route("/multivariate")
def multivariate_stats(**kwargs):
    data_to_plot = [data[v] for k, v in kwargs.items()]
    return template_layout(dcc.Graph(figure=plots.histogram(*data_to_plot)))

</code></pre></div></div>

<p>Thanks to Mercy University Hospital for this, I’ve found this bit of code incredibly helpful in managing some larger dash apps with many pages. One item I have yet to try with this is sending a JSON payload via post to some url. Thats next on my to-do list.</p>

<h3 id="responsive-layout">
<a class="anchor" href="#responsive-layout" aria-hidden="true"><span class="octicon octicon-link"></span></a>Responsive Layout</h3>

<p>One of the things I like best about Dash is being able to easily transfer plotly charts I’ve created in Jupyter Notebook/Lab and put them on a dashboard by <code class="language-plaintext highlighter-rouge">dcc.Graph</code>. In general this is painless and works well, but it can feel clunky without a few adjustments to make the layout responsive.</p>

<p>There are a few ways to do this but here is my preference:</p>

<ol>
  <li>Use Dash Bootstrap Component and be sure your layout is encapsulated by a <code class="language-plaintext highlighter-rouge">dbc.Container</code> with <code class="language-plaintext highlighter-rouge">fluid=True</code>.</li>
  <li>Be sure any <code class="language-plaintext highlighter-rouge">dcc.Graph</code> component is in a <code class="language-plaintext highlighter-rouge">dbc.Col</code>. By doing this the default behavior is for the plot to automatically resize in the horizontal direction based on the viewport (aka browser window).</li>
  <li>For plots to resize vertically, use viewport units to define the height. For a plot that takes up 50% of the viewport screen: <code class="language-plaintext highlighter-rouge">figure=go.Figure(layout_height='50vh')</code>. (This can also be used for width, but I prefer to let the <code class="language-plaintext highlighter-rouge">dbc.Col</code> handle that by setting the <code class="language-plaintext highlighter-rouge">width</code> argument there.)</li>
</ol>

<blockquote>
  <p>Note: If your plot has <code class="language-plaintext highlighter-rouge">layout_height</code> and/or <code class="language-plaintext highlighter-rouge">layout_width</code> defined by pixels (passing an integer to these keywords assumes pixels) the plot will not resize correctly.</p>
</blockquote>

<p>It should also be mentioned that if you do not desire responsive plots <code class="language-plaintext highlighter-rouge">responsive=False</code> can be set in the <code class="language-plaintext highlighter-rouge">dcc.Graph</code> component.</p>

<h3 id="remove-the-plotly-logo">
<a class="anchor" href="#remove-the-plotly-logo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Remove the Plotly Logo</h3>

<p>Another quick note on plots. If you’d like to strip the plotly logo off the tool bar of your plots set <code class="language-plaintext highlighter-rouge">displaylogo=False</code>. Heres a histogram plotting example from the dash-demo repo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dcc.Graph(figure=plots.histogram(data[distribution_name]),
            style={"height": "80vh"},
            config={
                "displaylogo": False,
            },
        )
</code></pre></div></div>

<h3 id="callback-triggers">
<a class="anchor" href="#callback-triggers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Callback Triggers</h3>

<p>Callbacks become central to any interactive dashboard made with Dash. A single callback yields a single html object, it is not possible to have multiple callbacks that control the same object. To get around this, it can be helpful to have a single callback, with multiple inputs and track which input is triggered. Based on the input triggered, different logic or actions can be applied to the resulting object.</p>

<p>Here is the key: <code class="language-plaintext highlighter-rouge">trigger = dash.callback_context.triggered</code>. Inside of your call back function this trigger can tell you which input was changed and its new value.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@app.callback(
    Output("my-output-div","children"),
    [Input("input_a", "Value), Input("input_b","value")]
)
def multiple_input_actions(value_a, value_b):
    trigger = dash.callback_context.triggered
    if trigger[0]["propid"] == "input_a":
        # do something particular for input_a here
        return "input_a triggered callback"
    else:
        # do something else here for input_b
        return "input_b triggered callback"
</code></pre></div></div>

<h2 id="conclusion">
<a class="anchor" href="#conclusion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusion</h2>

<p>Dash is great. There are a handful of alternatives (streamlit, panel, bokeh etc) they all have their place too, but I highly recommend dash if you need a professional looking dashboard but want to stop short of building a complete flask app. The above tips, snippets and strategies are things I use regularly and hopefully they’ll be helpful for others. If so, please let me know. Or, if you’ve got a better approach I’d love to hear that too. For a more complete example take a look at the <a href="https://github.com/ericbdaniels/dash-demo">dash-demo repo</a> which includes examples of most of the items mentioned above.</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="ericbdaniels/blog"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/python/plotly/dash/flask/dash%20bootstrap%20components/2020/11/26/dash-post.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Python code snippets, thoughts on Geostatistics and lessons learned the hard way.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/ericbdaniels" title="ericbdaniels"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/__getostats__" title="__getostats__"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
